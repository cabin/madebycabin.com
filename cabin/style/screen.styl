@import nib
@import default
@import util

cabin_black = #2b2b2b
cabin_grey_dark = #929292
cabin_grey_med = #d2d2d2
cabin_grey_light = #f2f2f2
cabin_mustard = #edbc13


// Common  ///////////////////////////////////////////////////////////////////

body
  color: cabin_black
  font: 13px/16px Helvetica Neue, Helvetica, sans-serif

a
  text-decoration: none


// Common nav/splash goodies  ////////////////////////////////////////////////

body > header
  absolute: top left
  right: 0
  display: none
  padding-top: 15%
  color: white
  light-text()

  h1, h2
    margin: 0 auto
    text-align: center
  h1
    font: bold 50px sans-serif
    text-transform: uppercase
  h2
    font: bold italic 25px/30px Georgia
    width: 420px
    max-width: 80%
    margin-top: 20px
    border-top: 1px solid rgba(white, .2)
    padding-top: 20px

nav
  fixed: top left
  right: 0
  z-index: 2
  > a
    font-weight: bold
    text-transform: uppercase
  .logo a
    hide-text()
    display: inline-block

// Make sure the main content is tall enough to cover the splash during
// transitions, and set up its initial position so animation works.
html, body
  height: 100%
.main
  background: #fff
  min-height: 100%
  relative: top

body.splash
  // Avoid page-width jump.
  overflow-y: scroll

  > header
    display: block
  nav
    absolute: bottom 0
    top: auto
  .main
    display: none

// Show everyone while transitioning.
body.splash-transition
  header, .main
    display: block


// iPhone 5 landscape and smaller  ///////////////////////////////////////////

@media only screen and (max-width: 568px)
  nav_height = 40px

  nav
    background: cabin_black
    display: table
    width: 100%
    height: nav_height
    line-height: @height

    .logo, > a
      light-text()
      color: #fff
      display: table-cell
      text-align: center
      width: 25%
    .logo a
      src = 'symbol-white.png'
      s = image-size(src)
      background-image: url(src)
      background-size: s[0] s[1]
      size: s[0] s[1]
      vertical-align: text-bottom
    > a
      border-left: 1px solid black
      hr
        display: none

  body > header
    bottom: nav_height
  .main
    margin-top: nav_height

  footer
    display: none


// Larger than iPhone 5 landscape  ///////////////////////////////////////////

@media only screen and (min-width: 569px)
  nav_height = 90px

  nav
    background: #fff
    border-bottom: 1px solid cabin_grey_light
    height: (nav_height / 3)
    line-height: @height
    padding: @height
    text-align: right

    .logo
      src = 'symbol-black.png'
      s = image-size(src)
      float: left
      // Size is for Firefox, which was adding 10px to height for some reason.
      size: s[0] s[1]
      a
        background-image: url(src)
        background-size: s[0] s[1]
        size: s[0] s[1]
        &:hover
          background-image: url('symbol-hover.png')

    > a
      color: cabin_black
      display: inline-block
      margin-left: 10px
      padding: 0 10px
      position: relative
      hr
        absolute: top left
        background: cabin_black
        border: none
        margin: 0
        size: 0 1px
        transition: width 200ms
      &:hover hr
        width: 100%

  body > header
    bottom: nav_height
  .main
    margin-top: nav_height

  footer
    background: cabin_black
    padding: 30px
    &, a
      color: black
    &:hover, &:hover a
      color: cabin_grey_dark
      transition: color 100ms ease-in
    a:hover
      color: cabin_mustard
      transition: none



// Neither CSS nor Stylus reliably supports nested media queries, so here we go
// with Retina images.  XXX it works if you use a & immediately inside the nest
@media only screen and (max-width: 568px) and (-webkit-min-device-pixel-ratio: 1.5)
  nav .logo a
    background-image: url('symbol-white@2x.png')

@media only screen and (min-width: 569px) and (-webkit-min-device-pixel-ratio: 1.5)
  nav .logo a
    background-image: url('symbol-black@2x.png')
    &:hover
      background-image: url('symbol-hover@2x.png')
