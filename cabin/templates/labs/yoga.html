{% extends "base.html" %}
{% set title = 'Yoga' %}
{% set page = 'labs-yoga' %}

{% block content %}

  <h1>Hot Yoga</h1>

  {% for date, classes in schedule %}
    {% set today = loop.first %}
    <table
    {%- if current_user.is_admin %}
      class="authed" data-date="{{ date.isoformat() }}"
    {% endif %}>
      <thead><tr>
        <th>
          <div class="small">
            <span>
            {%- if today -%}
              Today
            {%- else -%}
              <span class="d">Tomorrow</span>
              <span class="m">Tmrw</span>
            {%- endif -%}
            </span>
            <span>{{ date.strftime('%b %d') }}</span>
          </div>
        </th>
        <th colspan="2" class="day">
          <span class="d">{{ date.strftime('%A') }}</span>
          <span class="m">{{ date.strftime('%a') }}</span>
        </th>
      </tr></thead>
      <tbody>
      {% for class in classes %}
        <tr class="
        {%- if today and class.time < now %} past{% endif -%}
        {%- if selected.date == date.isoformat() and selected.index == loop.index0 %} sel{% endif -%}
        ">
          <td>{{ timeformat(class.time) }}</td>
          <td class="type">
            {{ class.type|first }}<span>/</span>{{ class.duration }}
          </td>
          <td>{{ class.teacher }}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  {% endfor %}

{% endblock %}
